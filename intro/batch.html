
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Batch &#8212; CardIO 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Models" href="models.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="models.html" title="Models"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CardIO 0.1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="intro.html" accesskey="U">Intro</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="batch">
<h1>Batch<a class="headerlink" href="#batch" title="Permalink to this headline">¶</a></h1>
<p>This module stores batch class for ECG and various actions on ECG batch.</p>
<div class="section" id="ecgbatch">
<h2>EcgBatch<a class="headerlink" href="#ecgbatch" title="Permalink to this headline">¶</a></h2>
<p>EcgBatch is the main class that defines how to store ECG data and contains actions
that can be applied to ECG in preprocessing stage.</p>
<p>Attributes of EcgBatch:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">signal</span></code>, stores ECG signals in numpy array</li>
<li><code class="docutils literal"><span class="pre">annotation</span></code>, array of dicts with different types of annotations, e.g. array of R-peaks</li>
<li><code class="docutils literal"><span class="pre">meta</span></code>, array of dicts with metadata about ECG records, e.g. signal frequency</li>
<li><code class="docutils literal"><span class="pre">target</span></code>, array of labels assigned to ECG records</li>
<li><code class="docutils literal"><span class="pre">unique_labels</span></code>, array of all possible target labels in dataset.</li>
</ul>
<p>Actions of EcgBatch allows e.g.:</p>
<ul class="simple">
<li>load ECG records from wfdb or blosc format</li>
<li>segment, flip and resample signals</li>
<li>filter signals</li>
<li>allocate PQ, QT, QRS segments</li>
<li>dump results.</li>
</ul>
<p>If you use pipeline you don’t have a direct access to the EcgBatch objects, but you can create an object with <code class="docutils literal"><span class="pre">next_batch</span></code> method of <a class="reference external" href="https://analysiscenter.github.io/dataset/api/dataset.pipeline.html#dataset.Pipeline" title="(in Dataset v0.2)"><code class="xref py py-class docutils literal"><span class="pre">Pipeline</span></code></a> class:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cardio</span> <span class="kn">import</span> <span class="n">EcgBatch</span>
<span class="kn">import</span> <span class="nn">cardio.dataset</span> <span class="kn">as</span> <span class="nn">ds</span>

<span class="n">index</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">FilesIndex</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;path/to/data/&quot;</span><span class="p">,</span> <span class="n">no_ext</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">dtst</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">batch_class</span><span class="o">=</span><span class="n">EcgBatch</span><span class="p">)</span>

<span class="n">template_ppln</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">Pipeline</span><span class="p">()</span>
      <span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;wfdb&quot;</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;signal&quot;</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">])</span>
      <span class="o">.</span><span class="n">wavelet_transform_signal</span><span class="p">(</span><span class="n">cwt_scales</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">16</span><span class="p">],</span> <span class="n">cwt_wavelet</span><span class="o">=</span><span class="s2">&quot;mexh&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">ppln</span> <span class="o">=</span> <span class="p">(</span><span class="n">dtst</span> <span class="o">&gt;&gt;</span> <span class="n">template_ppln</span><span class="p">)</span>
<span class="n">batch</span> <span class="o">=</span> <span class="n">ppln</span><span class="o">.</span><span class="n">next_batch</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># create instance of EcgBatch class with size 10</span>
</pre></div>
</div>
</div>
<div class="section" id="other-capabilities">
<h2>Other capabilities<a class="headerlink" href="#other-capabilities" title="Permalink to this headline">¶</a></h2>
<p>Batch module also contains several submodules that support functionality of EcgBacth and not included in API.
You can find brief description of those submodules below. To learn more see the source code.</p>
<div class="section" id="ecg-batch-tools">
<h3>ecg_batch_tools<a class="headerlink" href="#ecg-batch-tools" title="Permalink to this headline">¶</a></h3>
<p>Contains general methods for signal processing that are exploited in EcgBatch actions.
Most of those methods support multiprocessing and are written with <code class="docutils literal"><span class="pre">numba</span></code>.
If you want to explore those methods or use them outside EcgBatch simply write</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cardio.batch</span> <span class="kn">import</span> <span class="n">ecg_batch_tools</span> <span class="k">as</span> <span class="n">bt</span>
</pre></div>
</div>
</div>
<div class="section" id="kernels">
<h3>kernels<a class="headerlink" href="#kernels" title="Permalink to this headline">¶</a></h3>
<p>This submodule contains kernel generation functions for signal convolution.</p>
</div>
<div class="section" id="utils">
<h3>utils<a class="headerlink" href="#utils" title="Permalink to this headline">¶</a></h3>
<p>Miscellaneous ECG Batch utils.</p>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../api/cardio.batch.html"><span class="doc">Batch API</span></a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Batch</a><ul>
<li><a class="reference internal" href="#ecgbatch">EcgBatch</a></li>
<li><a class="reference internal" href="#other-capabilities">Other capabilities</a><ul>
<li><a class="reference internal" href="#ecg-batch-tools">ecg_batch_tools</a></li>
<li><a class="reference internal" href="#kernels">kernels</a></li>
<li><a class="reference internal" href="#utils">utils</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="models.html"
                        title="next chapter">Models</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/intro/batch.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="models.html" title="Models"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CardIO 0.1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="intro.html" >Intro</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Analysis Center.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>